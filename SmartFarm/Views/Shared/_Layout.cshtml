
@using SmartFarm.Data;
@using SmartFarm.Data.Entities;
@using Microsoft.AspNetCore.Identity
@inject AppDbContext context
@inject UserManager<Customer> UserManager
@inject SignInManager<Customer> SignInManager
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - SmartFarm</title>
    <link rel="stylesheet" type="text/css" href="/css/site.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
          crossorigin="anonymous" />


    <!-- GOOGLE FONT -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Kumbh+Sans:wght@500;600;700&family=Lato:wght@300;400;700;900&family=Reggae+One&display=swap"
          rel="stylesheet" />
    @await RenderSectionAsync("CustomCss", false)
</head>
<body>
    <header>
        <nav class="navbar navbar-expand-md navbar-light bg-light nav-bar p-0 pl-md-5 fixed-top">
            <!-- <div class="container-fluid"> -->
            <div class="nav-logo">
                <a href="@Url.Action("Home", "Home")" class="navbar-brand p-4 py-md-0 d-inline-block">AEFARM</a>
            </div>

            <button class="navbar-toggler me-4"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#navbarSupportedContent"
                    aria-controls="navbarSupportedContent"
                    aria-expanded="false"
                    aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">

                <partial name="_LoginPartial" />
                <ul class="navbar-nav me-auto">
                    @if (SignInManager.IsSignedIn(User))
                    {
                        var username = UserManager.GetUserAsync(User).Result.UserName;
                        var admin = (from u in context.Customer
                                     where u.UserName == username
                                     select u.VaiTro).FirstOrDefault();
                        @if (admin == "admin")
                        {
                            <li class="nav-item nav__item">
                                <a class="nav-link nav__link" aria-current="page" href="@Url.Action("ManageUser","Admin")">Quản lí tài khoản</a>
                            </li>
                        }
                    }
                    <li class="nav-item nav__item">
                        <a class="nav-link nav__link" aria-current="page" href="@Url.Action("Home","Home")">Trang chủ</a>
                    </li>

                    <li class="nav-item nav__item">
                        <a class="nav-link nav__link" href="@Url.Action("controlDevice","OutputDevice")">Điều khiển</a>
                    </li>
                    <li class="nav-item nav__item">
                        <a class="nav-link nav__link" href="@Url.Action("setUpNguong","InputDevice")">Thiết lập ngưỡng</a>
                    </li>
                    <li class="nav-item nav__item">
                        <a class="nav-link nav__link" href="@Url.Action("Thonke","Statistic")">Xem thống kê</a>
                    </li>
                </ul>
                <partial name="_LoginPartiall" />
            </div>
            <!-- </div> -->
        </nav>
    </header>
    <div>
        <main role="main" class="pb-3">
            @RenderBody()
        </main>
    </div>
    <footer class="footer">
        <div class="nav-logo lg-font my-5 mx-auto text-center">
            <a href="@Url.Action("Home","Home")" class="d-inline-block lg-font">AEFARM</a>
        </div>
        <ul class="nav">
            <li class="nav__item">
                <a href="#" class="nav__link">Find your dream home</a>
            </li>
            <li class="nav__item">
                <a href="#" class="nav__link">Request proposal</a>
            </li>
            <li class="nav__item">
                <a href="#" class="nav__link">Download home planner</a>
            </li>
            <li class="nav__item">
                <a href="#" class="nav__link">Contact us</a>
            </li>
            <li class="nav__item">
                <a href="#" class="nav__link">Submit your property</a>
            </li>
            <li class="nav__item">
                <a href="#" class="nav__link">Come work with us!</a>
            </li>
        </ul>
        <p class="copyright">
            &copy; Copyright 2022 by AE mien trung team. Feel free to use this
            project for your own purposes. This does NOT apply if you plan to
            produce your own course or tutorials based on this project.
        </p>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
            crossorigin="anonymous"
            defer></script>
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    @RenderSection("Scripts", required: false)
</body>
</html>
